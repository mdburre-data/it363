<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mock Appointment Scheduler</title>
</head>
<body>
  <p><a href="index.html">Back to Main Page</a></p>
  <h1>Admin Page</h1>
    <p>Welcome, Admin! Use the buttons below to manage the database.</p>
    
    <h2>Change Weekly Scheduling Hours</h2>
    <form id="changeHoursForm" method="POST" onsubmit="changeHoursHandler(event)">
      <label for="dayOfWeek">Day of the Week:</label>
      <select id="dayOfWeek" name="dayOfWeek" required>
        <option value="1">Monday</option>
        <option value="2">Tuesday</option>
        <option value="3">Wednesday</option>
        <option value="4">Thursday</option>
        <option value="5">Friday</option>
        <option value="6">Saturday</option>
        <option value="7">Sunday</option>
      </select><br>
      <label for="startTime">Start Time:</label>
      <input type="time" id="startTime" name="startTime" required><br><br>
      <label for="endTime">End Time:</label>
      <input type="time" id="endTime" name="endTime" required><br><br>
      <button type="submit">Submit</button>
    </form>
    <h2>Block Date:</h2>
    <form id="blockDateForm" method="POST" onsubmit="blockDateHandler(event)">
      <label for="blockDate">Date to Block:</label>
      <input type="date" id="blockDate" name="blockDate" required><br><br>
      <button type="submit">Submit</button>
    </form>

    <h2>Unblock Date:</h2>
    <form id="unblockDateForm" method="POST" onsubmit="unblockDateHandler(event)">
      <label for="unblockDate">Date to Unblock:</label>
      <input type="date" id="unblockDate" name="unblockDate" required><br><br>
      <button type="submit">Submit</button>
    </form>

      <div id="changeHoursOutput" style="margin-top:20px;"></div>
    
      <h2>Run PHP Scripts</h2>
      <button onclick="callPhp('display_booked_appointments.php')">Display Booked Appointments</button>
      <button onclick="callPhp('display_hours.php')">Display Scheduling Hours</button>
      <div id="output" style="margin-top:20px;"></div>
</body>
<script>
  // Function to call PHP scripts
  function changeHoursHandler(event) {
    event.preventDefault(); 
    const form = event.target;
    const formData = new FormData(form);
    fetch('change_hours.php', {
      method: 'POST',
      body: formData
    })
    .then(response => response.text())
    .then(data => {
      // Instead of alert, inject result into #changeHoursOutput
      document.getElementById("changeHoursOutput").innerHTML = data;
    })
    .catch(error => {
      document.getElementById("changeHoursOutput").innerHTML = "Error: " + error;
    });
  }

  function blockDateHandler(event) {
    event.preventDefault(); 
    const form = event.target;
    const formData = new FormData(form);
    fetch('block_date.php', {
      method: 'POST',
      body: formData
    })
    .then(response => response.text())
    .then(data => {
      // Instead of alert, inject result into #changeHoursOutput
      document.getElementById("changeHoursOutput").innerHTML = data;
    })
    .catch(error => {
      document.getElementById("changeHoursOutput").innerHTML = "Error: " + error;
    });
  }

  function unblockDateHandler(event) {
    event.preventDefault(); 
    const form = event.target;
    const formData = new FormData(form);
    fetch('unblock_date.php', {
      method: 'POST',
      body: formData
    })
    .then(response => response.text())
    .then(data => {
      // Instead of alert, inject result into #changeHoursOutput
      document.getElementById("changeHoursOutput").innerHTML = data;
    })
    .catch(error => {
      document.getElementById("changeHoursOutput").innerHTML = "Error: " + error;
    });
  }

  function callPhp(scriptName) {
      fetch(scriptName)
        .then(response => response.text())
        .then(data => {
          // Instead of alert, inject result into #output
          document.getElementById("output").innerHTML = data;
        })
        .catch(error => {
          document.getElementById("output").innerHTML = "Error: " + error;
        });
  }
</script>
</html>